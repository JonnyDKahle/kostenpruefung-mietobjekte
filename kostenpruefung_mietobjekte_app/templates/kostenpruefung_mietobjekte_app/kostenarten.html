{% load static %}
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Kostenarten</title>
    <link rel="stylesheet" href="{% static 'kostenpruefung_mietobjekte_app/style.css' %}">
    <script>
        // Function to make colors softer by adding opacity
        function makeSoftColor(hexColor) {
            // Convert hex to RGB
            const r = parseInt(hexColor.slice(1, 3), 16);
            const g = parseInt(hexColor.slice(3, 5), 16);
            const b = parseInt(hexColor.slice(5, 7), 16);
            
            // Return RGBA with reduced opacity for soft background
            return `rgba(${r}, ${g}, ${b}, 0.3)`;
        }
    </script>>
</head>
<body>
<div class="flex-container">
    <nav class="sidebar">
        <a class="sidebar-link" href="{% url 'kostenpruefung_mietobjekte_app:objekt_index' %}">Objekt</a>
        <a class="sidebar-link" href="{% url 'kostenpruefung_mietobjekte_app:mieter_laufend' %}">Mieter</a>
        <a class="sidebar-link" href="#">Kosten</a>
        <ul style="list-style-type: disc; margin-left: 30px; margin-bottom: 20px;">
            <li><a href="{% url 'kostenpruefung_mietobjekte_app:rechnungen' %}">Rechnungen</a></li>
            <li><a href="{% url 'kostenpruefung_mietobjekte_app:kostenarten' %}">Kostenarten</a></li>
            <li><a href="{% url 'kostenpruefung_mietobjekte_app:lieferanten' %}">Lieferant</a></li>
        </ul>
        <a class="sidebar-link" href="{% url 'kostenpruefung_mietobjekte_app:konto' %}">Konto</a>
        <a class="sidebar-link" href="{% url 'kostenpruefung_mietobjekte_app:auswertung' %}">Auswertung</a>
    </nav>
    <div class="main-content">

        <h2>Alle Kostenarten</h2>
        <form action="{% url 'kostenpruefung_mietobjekte_app:rechnungsart_create' %}" method="get" style="margin-bottom: 16px;">
            <button class="action-btn" type="submit">Anlegen</button>
        </form>
        <table class="kostenarten-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Aktionen</th>
                </tr>
            </thead>
            <tbody>
                {% for k in kostenarten %}
                <tr class="kostentart-row" data-color="{{ k.farbe }}">
                    <td class="kostenart-name">{{ k.name }}</td>
                    <td class="objekt-actions">
                        <form action="{% url 'kostenpruefung_mietobjekte_app:rechnungsart_update' k.id %}" method="get" class="inline-form">
                            <button class="action-btn" type="submit">Bearbeiten</button>
                        </form>
                        <form action="{% url 'kostenpruefung_mietobjekte_app:rechnungsart_delete' k.id %}" method="get" class="inline-form">
                            <button class="action-btn" type="submit">LÃ¶schen</button>
                        </form>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="2" class="kostenarten-empty">Keine Kostenarten vorhanden.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Apply soft background colors to each row
                const rows = document.querySelectorAll('.kostentart-row[data-color]');
                rows.forEach(row => {
                    const color = row.getAttribute('data-color');
                    if (color) {
                        const softColor = makeSoftColor(color);
                        row.style.backgroundColor = softColor;
                    }
                });
            });
        </script>
    </div>
</div>
</body>
</html>